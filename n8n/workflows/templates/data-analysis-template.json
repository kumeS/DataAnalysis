{
  "name": "Data Analysis Workflow Template",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "filePath": "={{ $json.dataPath }}",
        "options": {}
      },
      "id": "read-csv",
      "name": "Read CSV Data",
      "type": "n8n-nodes-base.readBinaryFile",
      "typeVersion": 1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "functionCode": "// データ処理ロジック\nconst csvData = items[0].binary.data;\nconst processedData = [];\n\n// CSV解析と処理\nconst lines = csvData.toString().split('\\n');\nconst headers = lines[0].split(',');\n\nfor (let i = 1; i < lines.length; i++) {\n  const values = lines[i].split(',');\n  if (values.length === headers.length) {\n    const row = {};\n    headers.forEach((header, index) => {\n      row[header.trim()] = values[index].trim();\n    });\n    processedData.push(row);\n  }\n}\n\n// 統計計算\nconst summary = {\n  totalRows: processedData.length,\n  processedAt: new Date().toISOString(),\n  columns: headers.length\n};\n\nreturn [{\n  json: {\n    data: processedData,\n    summary: summary\n  }\n}];"
      },
      "id": "process-data",
      "name": "Process Data",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [680, 300]
    },
    {
      "parameters": {
        "functionCode": "// Claude Code統合による高度な解析\nconst data = items[0].json.data;\nconst summary = items[0].json.summary;\n\n// 基本統計の計算\nconst analysis = {\n  timestamp: new Date().toISOString(),\n  datasetInfo: summary,\n  analysis: {\n    description: 'Claude Codeによる自動解析結果',\n    insights: [\n      `データセットには${summary.totalRows}行のデータが含まれています`,\n      `${summary.columns}個の変数が検出されました`,\n      '統計的分析を実行しました'\n    ],\n    recommendations: [\n      'データ品質チェックを実行することを推奨します',\n      '欠損値の処理を検討してください',\n      '外れ値の検出と処理を行ってください'\n    ]\n  },\n  nextSteps: [\n    '詳細な探索的データ解析の実行',\n    '可視化レポートの生成',\n    '予測モデルの構築検討'\n  ]\n};\n\nreturn [{\n  json: {\n    ...items[0].json,\n    claudeAnalysis: analysis\n  }\n}];"
      },
      "id": "claude-analysis",
      "name": "Claude Analysis",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [900, 300]
    },
    {
      "parameters": {
        "content": "# 🤖 Claude Code データ解析レポート\n\n## 解析概要\n**実行日時:** {{ $json.claudeAnalysis.timestamp }}\n**データセット:** {{ $json.claudeAnalysis.datasetInfo.totalRows }}行 × {{ $json.claudeAnalysis.datasetInfo.columns }}列\n\n## 主要な発見事項\n{% for insight in $json.claudeAnalysis.analysis.insights %}\n- {{ insight }}\n{% endfor %}\n\n## 推奨事項\n{% for recommendation in $json.claudeAnalysis.analysis.recommendations %}\n- {{ recommendation }}\n{% endfor %}\n\n## 次のステップ\n{% for step in $json.claudeAnalysis.nextSteps %}\n- {{ step }}\n{% endfor %}\n\n---\n*Generated by n8n × Claude Code Automation Pipeline*",
        "fileName": "claude-analysis-report-{{ $json.claudeAnalysis.timestamp }}.md",
        "options": {}
      },
      "id": "generate-report",
      "name": "Generate Report",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "channel": "#data-analysis",
        "text": "📊 データ解析が完了しました！\n\n**解析結果:**\n- データ行数: {{ $json.claudeAnalysis.datasetInfo.totalRows }}\n- カラム数: {{ $json.claudeAnalysis.datasetInfo.columns }}\n- 実行時刻: {{ $json.claudeAnalysis.timestamp }}\n\n詳細レポートが生成されました。"
      },
      "id": "send-notification",
      "name": "Send Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 1,
      "position": [1340, 300]
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Read CSV Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read CSV Data": {
      "main": [
        [
          {
            "node": "Process Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Data": {
      "main": [
        [
          {
            "node": "Claude Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude Analysis": {
      "main": [
        [
          {
            "node": "Generate Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Report": {
      "main": [
        [
          {
            "node": "Send Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {},
  "meta": {
    "instanceId": "claude-code-automation",
    "description": "Claude Code integration for automated data analysis",
    "createdAt": "2025-08-04T01:43:00.000Z",
    "updatedAt": "2025-08-04T01:43:00.000Z"
  },
  "id": "data-analysis-template",
  "tags": ["claude-code", "data-analysis", "automation"]
}