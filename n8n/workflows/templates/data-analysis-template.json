{
  "name": "Data Analysis Workflow Template",
  "nodes": [
    {
      "parameters": {
        "rule": {
          "interval": [
            {
              "field": "hours",
              "hoursInterval": 6
            }
          ]
        }
      },
      "id": "schedule-trigger",
      "name": "Schedule Trigger",
      "type": "n8n-nodes-base.cron",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "filePath": "={{ $json.dataPath }}",
        "options": {}
      },
      "id": "read-csv",
      "name": "Read CSV Data",
      "type": "n8n-nodes-base.readBinaryFile",
      "typeVersion": 1,
      "position": [460, 300]
    },
    {
      "parameters": {
        "functionCode": "// ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ­ã‚¸ãƒƒã‚¯\nconst csvData = items[0].binary.data;\nconst processedData = [];\n\n// CSVè§£æã¨å‡¦ç†\nconst lines = csvData.toString().split('\\n');\nconst headers = lines[0].split(',');\n\nfor (let i = 1; i < lines.length; i++) {\n  const values = lines[i].split(',');\n  if (values.length === headers.length) {\n    const row = {};\n    headers.forEach((header, index) => {\n      row[header.trim()] = values[index].trim();\n    });\n    processedData.push(row);\n  }\n}\n\n// çµ±è¨ˆè¨ˆç®—\nconst summary = {\n  totalRows: processedData.length,\n  processedAt: new Date().toISOString(),\n  columns: headers.length\n};\n\nreturn [{\n  json: {\n    data: processedData,\n    summary: summary\n  }\n}];"
      },
      "id": "process-data",
      "name": "Process Data",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [680, 300]
    },
    {
      "parameters": {
        "functionCode": "// Claude Codeçµ±åˆã«ã‚ˆã‚‹é«˜åº¦ãªè§£æ\nconst data = items[0].json.data;\nconst summary = items[0].json.summary;\n\n// åŸºæœ¬çµ±è¨ˆã®è¨ˆç®—\nconst analysis = {\n  timestamp: new Date().toISOString(),\n  datasetInfo: summary,\n  analysis: {\n    description: 'Claude Codeã«ã‚ˆã‚‹è‡ªå‹•è§£æçµæœ',\n    insights: [\n      `ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã«ã¯${summary.totalRows}è¡Œã®ãƒ‡ãƒ¼ã‚¿ãŒå«ã¾ã‚Œã¦ã„ã¾ã™`,\n      `${summary.columns}å€‹ã®å¤‰æ•°ãŒæ¤œå‡ºã•ã‚Œã¾ã—ãŸ`,\n      'çµ±è¨ˆçš„åˆ†æã‚’å®Ÿè¡Œã—ã¾ã—ãŸ'\n    ],\n    recommendations: [\n      'ãƒ‡ãƒ¼ã‚¿å“è³ªãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™',\n      'æ¬ æå€¤ã®å‡¦ç†ã‚’æ¤œè¨ã—ã¦ãã ã•ã„',\n      'å¤–ã‚Œå€¤ã®æ¤œå‡ºã¨å‡¦ç†ã‚’è¡Œã£ã¦ãã ã•ã„'\n    ]\n  },\n  nextSteps: [\n    'è©³ç´°ãªæ¢ç´¢çš„ãƒ‡ãƒ¼ã‚¿è§£æã®å®Ÿè¡Œ',\n    'å¯è¦–åŒ–ãƒ¬ãƒãƒ¼ãƒˆã®ç”Ÿæˆ',\n    'äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®æ§‹ç¯‰æ¤œè¨'\n  ]\n};\n\nreturn [{\n  json: {\n    ...items[0].json,\n    claudeAnalysis: analysis\n  }\n}];"
      },
      "id": "claude-analysis",
      "name": "Claude Analysis",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [900, 300]
    },
    {
      "parameters": {
        "content": "# ğŸ¤– Claude Code ãƒ‡ãƒ¼ã‚¿è§£æãƒ¬ãƒãƒ¼ãƒˆ\n\n## è§£ææ¦‚è¦\n**å®Ÿè¡Œæ—¥æ™‚:** {{ $json.claudeAnalysis.timestamp }}\n**ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆ:** {{ $json.claudeAnalysis.datasetInfo.totalRows }}è¡Œ Ã— {{ $json.claudeAnalysis.datasetInfo.columns }}åˆ—\n\n## ä¸»è¦ãªç™ºè¦‹äº‹é …\n{% for insight in $json.claudeAnalysis.analysis.insights %}\n- {{ insight }}\n{% endfor %}\n\n## æ¨å¥¨äº‹é …\n{% for recommendation in $json.claudeAnalysis.analysis.recommendations %}\n- {{ recommendation }}\n{% endfor %}\n\n## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—\n{% for step in $json.claudeAnalysis.nextSteps %}\n- {{ step }}\n{% endfor %}\n\n---\n*Generated by n8n Ã— Claude Code Automation Pipeline*",
        "fileName": "claude-analysis-report-{{ $json.claudeAnalysis.timestamp }}.md",
        "options": {}
      },
      "id": "generate-report",
      "name": "Generate Report",
      "type": "n8n-nodes-base.writeBinaryFile",
      "typeVersion": 1,
      "position": [1120, 300]
    },
    {
      "parameters": {
        "channel": "#data-analysis",
        "text": "ğŸ“Š ãƒ‡ãƒ¼ã‚¿è§£æãŒå®Œäº†ã—ã¾ã—ãŸï¼\n\n**è§£æçµæœ:**\n- ãƒ‡ãƒ¼ã‚¿è¡Œæ•°: {{ $json.claudeAnalysis.datasetInfo.totalRows }}\n- ã‚«ãƒ©ãƒ æ•°: {{ $json.claudeAnalysis.datasetInfo.columns }}\n- å®Ÿè¡Œæ™‚åˆ»: {{ $json.claudeAnalysis.timestamp }}\n\nè©³ç´°ãƒ¬ãƒãƒ¼ãƒˆãŒç”Ÿæˆã•ã‚Œã¾ã—ãŸã€‚"
      },
      "id": "send-notification",
      "name": "Send Notification",
      "type": "n8n-nodes-base.slack",
      "typeVersion": 1,
      "position": [1340, 300]
    }
  ],
  "connections": {
    "Schedule Trigger": {
      "main": [
        [
          {
            "node": "Read CSV Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Read CSV Data": {
      "main": [
        [
          {
            "node": "Process Data",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Process Data": {
      "main": [
        [
          {
            "node": "Claude Analysis",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Claude Analysis": {
      "main": [
        [
          {
            "node": "Generate Report",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Generate Report": {
      "main": [
        [
          {
            "node": "Send Notification",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {},
  "meta": {
    "instanceId": "claude-code-automation",
    "description": "Claude Code integration for automated data analysis",
    "createdAt": "2025-08-04T01:43:00.000Z",
    "updatedAt": "2025-08-04T01:43:00.000Z"
  },
  "id": "data-analysis-template",
  "tags": ["claude-code", "data-analysis", "automation"]
}