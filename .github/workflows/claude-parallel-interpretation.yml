name: Claude Parallel Metabolomics Interpretation

on:
  push:
    paths:
      - 'results/parallel-metabolomics-analysis/**'
    branches:
      - main

jobs:
  claude-parallel-interpretation:
    if: contains(github.event.head_commit.message, 'Generated by Claude Â· Parallel Metabolomics Analysis workflow')
    runs-on: ubuntu-latest
    permissions:
      contents: write
      issues: write
      pull-requests: write
      id-token: write
      actions: read

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 1

      - name: Generate Claude AI Interpretation for Parallel Analysis
        uses: anthropics/claude-code-action@beta
        with:
          claude_code_oauth_token: ${{ secrets.CLAUDE_CODE_OAUTH_TOKEN }}
          direct_prompt: |
            I have committed new parallel metabolomics analysis results to the repository. Please analyze these comprehensive results and provide scientific interpretation.
            
            This analysis used three parallel components executed simultaneously:
            1. **EDA (Exploratory Data Analysis)** - PCA, correlation analysis, basic statistics
            2. **Modeling** - Statistical modeling and hypothesis testing
            3. **Visualization** - Advanced data visualization and heatmaps
            
            The analysis files are located in the latest `results/parallel-metabolomics-analysis/` directory and include:
            - FINAL_REPORT.md (integrated report from all components)
            - README.md (analysis summary)
            - eda-outputs/ (exploratory analysis results and visualizations)
            - modeling-outputs/ (statistical modeling results)
            - viz-outputs/ (visualization analysis outputs)
            
            Please examine these files and provide comprehensive interpretation covering:
            
            ## 1. Executive Summary
            - Overview of parallel analysis approach
            - Key findings across all analysis components
            - Integration of insights from EDA, modeling, and visualization
            
            ## 2. Component-Specific Analysis
            - **EDA Insights**: Patterns discovered through exploratory analysis
            - **Modeling Results**: Statistical findings and significance
            - **Visualization Insights**: Pattern recognition from visual analysis
            
            ## 3. Integrated Biological Interpretation
            - Metabolic pathway implications from combined analysis
            - Fasting state metabolic profile insights
            - Cross-component validation of findings
            - Potential biomarkers identified through multiple approaches
            
            ## 4. Statistical Validation
            - Cross-validation between analysis components
            - Statistical significance assessment
            - Data quality evaluation across all components
            
            ## 5. Clinical and Research Implications
            - Health implications of integrated findings
            - Diagnostic potential of identified patterns
            - Research applications and future directions
            
            ## 6. Methodological Assessment
            - Benefits of parallel analysis approach
            - Computational efficiency gains
            - Analytical robustness and validation
            
            ## 7. Actionable Recommendations
            - Immediate steps for result utilization
            - Future analysis suggestions
            - Data integration opportunities
            
            Focus on integrating insights from all three parallel components and highlight the advantages 
            of the multi-component approach. Create a new file called 'claude_parallel_interpretation.md' 
            in the same results directory with your comprehensive analysis.
            
            After creating the interpretation, commit it to the repository with an appropriate commit message.